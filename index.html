<script>
  async function startGenerate() {
    const file = document.getElementById('imageUpload').files[0];
    const desc = document.getElementById('desc').value.trim();

    if (!file) {
      alert('Silakan upload gambar dulu!');
      return;
    }

    if (!desc) {
      alert('Jangan lupa isi deskripsi gerakan!');
      return;
    }

    const formData = new FormData();
    formData.append('image', file);
    formData.append('description', desc);

    try {
      const response = await fetch('https://ardiimage-api.ardimlbb123y.repl.co/generate', {
        method: 'POST',
        body: formData
      });

      const data = await response.json();
      if (data.success) {
        document.getElementById('videoResult').style.display = 'block';
        document.getElementById('resultVideo').src = data.videoUrl;
      } else {
        alert('Gagal generate video.');
      }
    } catch (err) {
      console.error(err);
      alert('Terjadi kesalahan saat menghubungi server.');
    }
  }
</script>
